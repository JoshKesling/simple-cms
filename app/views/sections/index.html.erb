<% @page_title = "Sections" %>

<%= link_to('<< Back to Pages', {controller: 'pages', action: 'index', subject_id: @subject.id, page_id: @page.id}, class: 'back-link') %>

<div class="sections index">
  <h2>Sections</h2>

  <%= link_to("Add New Section", {action: 'new', page_id: @page.id, subject_id: @subject.id}, class: 'action new') %>

  <table class="listing" summary="Section list">
    <tr class="header">
      <th>&nbsp;</th>
      <th>Section</th>
      <th>Visible</th>
      <th>Page</th>
      <th>Content Type</th>
      <th>Actions</th>
    </tr>
    <% @sections.each do |section| %>
      <tr class="<%= cycle('odd', 'even') %>">
        <td><%= section.position %></td>
        <td><%= section.name %></td>
        <td class="center"><%= status_tag(section.visible) %></td>
        <td class="center"><%= section.page.name if section.page %></td>
        <td class="center"><%= section.content_type %></td>
        <td class="actions">
          <%= link_to("Show", {action: 'show', id: section.id, page_id: @page.id, subject_id: @subject.id}, :class => 'action show') %>
          <%= link_to("Edit", {:action => 'edit', :id => section.id, page_id: @page.id, subject_id: @subject.id}, :class => 'action edit') %>
          <%= link_to("Delete", {:action => 'delete', :id => section.id, page_id: @page.id, subject_id: @subject.id}, :class => 'action delete') %>
        </td>
      </tr>
    <% end %>
  </table>
</div>
